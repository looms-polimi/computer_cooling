within ComputerCooling.OnePhaseLiquidComponents.FlowControl.Pumps;

model VolumetricPump
  extends OnePhaseLiquidComponents.BaseClasses.TwoPorts_pwh(final pbhi = true);
  replaceable model medium = Media.SubCooledWater_Incompressible;
  medium m;
  
  Modelica.Blocks.Interfaces.RealInput cmd annotation(
    Placement(visible = true, transformation(origin = {-48, 72}, extent = {{-20, -20}, {20, 20}}, rotation = 0), iconTransformation(origin = {-120, 80}, extent = {{-20, -20}, {20, 20}}, rotation = 0)));

  parameter MassFlowRate w_nom = 1 "mass flowrate at cmd = 1";
  
  Power P;
equation
  //liquid coordinates
  m.p = pwh_a.p;
  m.h = pwh_a.h;
  
  //pump equations
  w = cmd * w_nom;
  
  hoa = hib - dp/m.d;
  hob = hia + dp/m.d;
  
  P = w * dp/m.d;
  
  assert(w >= 0, "flow reversal not allowed in VolumetricPump");

annotation(
    Icon(graphics = {Bitmap(origin = {0, 22}, extent = {{-100, -76}, {100, 76}}, imageSource = "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")}));
end VolumetricPump;
