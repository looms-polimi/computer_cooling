within ComputerCooling.IncompressibleLiquidComponents.FlowControl.Valves;

model ValveOnOff_TwoPort
  extends IncompressibleLiquidComponents.BaseClasses.TwoPorts_pwh;
  
  parameter PressureDifference dp_nom = 5e4 "nominal pressure difference at w_nom and cmd = 1";
  parameter MassFlowRate w_nom = 1 "nominal mass flow rate at dp_nom and cmd = 1";
  Modelica.Blocks.Interfaces.RealInput cmd annotation(
    Placement(visible = true, transformation(origin = {-100, 70}, extent = {{-20, -20}, {20, 20}}, rotation = 0), iconTransformation(origin = {0, 100}, extent = {{-20, -20}, {20, 20}}, rotation = -90)));

protected
  final parameter Real kv = w_nom / dp_nom annotation(Evaluate = true);
  
equation
//modulated flow
  w = if cmd <= 0 then 1e-6 else kv * dp;
//minimal mass flowrate allowed for circuit modeling reasons
  hoa = hib;
//no changes in enthalpy
  hob = hia;

annotation(
    Icon(graphics = {Text(origin = {0, -65}, extent = {{-60, 13}, {60, -13}}, textString = "On/Off"), Bitmap(origin = {0, 14}, extent = {{-100, -66}, {100, 66}}, imageSource = "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")}));
end ValveOnOff_TwoPort;
