within ComputerCooling.IncompressibleLiquidComponents.FlowControl.Pumps;

model VolumetricPump
  extends IncompressibleLiquidComponents.BaseClasses.TwoPorts_pwh(final pbhi = true);
  replaceable model medium = Media.SubCooledWater_Incompressible;
  medium m;
  
  Modelica.Blocks.Interfaces.RealInput cmd annotation(
    Placement(visible = true, transformation(origin = {-48, 72}, extent = {{-20, -20}, {20, 20}}, rotation = 0), iconTransformation(origin = {-120, 80}, extent = {{-20, -20}, {20, 20}}, rotation = 0)));
  
  parameter MassFlowRate w_nom = 1 "mass flowrate at cmd = 1";
  
  Power P;
equation
//liquid coordinates
  m.p = pwh_a.p;
  m.h = pwh_a.h;
//pump equations
  w = cmd * w_nom;
  hoa = hib - dp / m.d;
  hob = hia + dp / m.d;
  P = w * dp / m.d;
  
  assert(w >= 0, "flow reversal not allowed in VolumetricPump");
  
annotation(
    Icon(graphics = {Text(origin = {0, 81}, extent = {{-60, 13}, {60, -13}}, textString = "Volumetric"), Bitmap(origin = {0, 14}, extent = {{-100, -66}, {100, 66}}, imageSource = "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")}));
end VolumetricPump;